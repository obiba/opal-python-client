language: python
python:
- '3.7'
- '3.11'
matrix:
  include:
  - python: 3.7
    dist: xenial
before_install:
- pip install poetry
- pip install pytest
install:
- poetry install -v
- poetry run pytest
before_deploy:
- poetry config http-basic.pypi $PYPI_USER $PYPI_PASSWORD
- poetry build
deploy:
  provider: script
  script: poetry publish
  on:
    tags: true
    condition: "$TRAVIS_PYTHON_VERSION == 3.7"